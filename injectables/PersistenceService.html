<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>Dossierapp documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	    <link rel="stylesheet" href="../styles/style.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">Dossierapp documentation</a>
            <button type="button" class="btn btn-default btn-menu fa fa-bars" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
            <div id="book-search-input" role="search">
                <input type="text" placeholder="Type to search">
            </div>
            <nav>
            
                <ul class="list">
            
                    <li class="title">
                        <a href="../index.html">Dossierapp documentation</a>
                    </li>
            
                    <li class="divider"></li>
            
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="../index.html"><span class="fa fa-home"></span>Getting started</a>
                        <ul class="links">
                                <li class="link">
                                    <a 
                                        
                                         href="../overview.html" 
                                         href="../overview.html" 
                                        >
                                        <span class="fa fa-th"></span>Overview
                                    </a>
                                </li>
                                <li class="link">
                                  <a href="../index.html" ><span class="fa fa-file-text-o"></span>README</a>
                                </li>
                                <li class="link">
                                    <a href="./changelog.html"
                                        >
                                        <span class="fa fa-file-text-o"></span>CHANGELOG
                                    </a>
                                </li>
                                <li class="link">
                                    <a href="./license.html"
                                        >
                                        <span class="fa fa-file-text-o"></span>LICENSE
                                    </a>
                                </li>
                        </ul>
                    </li>
            
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="../modules.html" >
                            <div class="menu-toggler linked" data-toggle="collapse"
                                    data-target="#xs-modules-links"
                            >
                                <span class="fa fa-archive"></span>
                                <span class="link-name">Modules</span>
                                <span class="fa fa-angle-down"></span>
                            </div>
                        </a>
                        <ul class="links collapse "
                                id="xs-modules-links"
                            >
                                <li class="link">
                                    <a href="../modules/AppModule.html" >AppModule</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <div class="simple menu-toggler" data-toggle="collapse"
                                data-target="#xs-components-links"
                            >
                            <span class="fa fa-cogs"></span>
                            <span>Components</span>
                            <span class="fa fa-angle-down"></span>
                        </div>
                        <ul class="links collapse "
                                id="xs-components-links"
                            >
                                <li class="link">
                                    <a href="../components/AttributesPage.html" >AttributesPage</a>
                                </li>
                                <li class="link">
                                    <a href="../components/EditAttributesPage.html" >EditAttributesPage</a>
                                </li>
                                <li class="link">
                                    <a href="../components/ImageViewerPage.html" >ImageViewerPage</a>
                                </li>
                                <li class="link">
                                    <a href="../components/LoginPage.html" >LoginPage</a>
                                </li>
                                <li class="link">
                                    <a href="../components/MyApp.html" >MyApp</a>
                                </li>
                                <li class="link">
                                    <a href="../components/NetworkPage.html" >NetworkPage</a>
                                </li>
                                <li class="link">
                                    <a href="../components/Object2FramesPage.html" >Object2FramesPage</a>
                                </li>
                                <li class="link">
                                    <a href="../components/OfflinePage.html" >OfflinePage</a>
                                </li>
                                <li class="link">
                                    <a href="../components/OperationsModal.html" >OperationsModal</a>
                                </li>
                                <li class="link">
                                    <a href="../components/OverviewPage.html" >OverviewPage</a>
                                </li>
                                <li class="link">
                                    <a href="../components/PdfViewerPage.html" >PdfViewerPage</a>
                                </li>
                                <li class="link">
                                    <a href="../components/SettingsPage.html" >SettingsPage</a>
                                </li>
                                <li class="link">
                                    <a href="../components/TaskPage.html" >TaskPage</a>
                                </li>
                                <li class="link">
                                    <a href="../components/VideoViewerPage.html" >VideoViewerPage</a>
                                </li>
                        </ul>
                    </li>
            
            
                    <li class="chapter">
                        <div class="simple menu-toggler" data-toggle="collapse"
                                data-target="#xs-classes-links"
                            >
                            <span class="fa fa-file-code-o"></span>
                            <span>Classes</span>
                            <span class="fa fa-angle-down"></span>
                        </div>
                        <ul class="links collapse "
                                id="xs-classes-links"
                            >
                                <li class="link">
                                    <a href="../classes/ConfigMock.html" >ConfigMock</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/FormMock.html" >FormMock</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/MenuMock.html" >MenuMock</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/NavMock.html" >NavMock</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/OverviewPageMock.html" >OverviewPageMock</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/PlatformMock.html" >PlatformMock</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <div class="simple menu-toggler" data-toggle="collapse"
                                data-target="#xs-injectables-links"
                            >
                            <span class="fa fa-long-arrow-down"></span>
                            <span>Injectables</span>
                            <span class="fa fa-angle-down"></span>
                        </div>
                        <ul class="links collapse "
                                id="xs-injectables-links"
                            >
                                <li class="link">
                                    <a href="../injectables/AuthService.html" >AuthService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/DBService.html" >DBService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/ErrorService.html" >ErrorService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/FileService.html" >FileService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/FingerPrintService.html" >FingerPrintService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/HttpInterceptorService.html" >HttpInterceptorService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/LoadingService.html" >LoadingService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/NativeService.html" >NativeService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/NetworkService.html" >NetworkService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/OfflineService.html" >OfflineService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/OperationService.html" >OperationService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/PermissionService.html" >PermissionService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/PersistenceService.html"  data-type="entity-link" class="active" >PersistenceService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/PushService.html" >PushService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/RestService.html" >RestService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/SearchService.html" >SearchService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/SearchService.html" >SearchService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/TaskService.html" >TaskService</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <div class="simple menu-toggler" data-toggle="collapse"
                                data-target="#xs-interfaces-links"
                            >
                            <span class="fa fa-info"></span>
                            <span>Interfaces</span>
                            <span class="fa fa-angle-down"></span>
                        </div>
                        <ul class="links collapse "
                                id="xs-interfaces-links"
                            >
                                <li class="link">
                                    <a href="../interfaces/DBAttributes.html" >DBAttributes</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/DBObject.html" >DBObject</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/DBOfflineObject.html" >DBOfflineObject</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/TIEAttributesEdit.html" >TIEAttributesEdit</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/TIEAttributesView.html" >TIEAttributesView</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/TIELink.html" >TIELink</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/TIEObject.html" >TIEObject</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <div class="simple menu-toggler" data-toggle="collapse"
                                data-target="#xs-pipes-links"
                            >
                            <span class="fa fa-plus"></span>
                            <span>Pipes</span>
                            <span class="fa fa-angle-down"></span>
                        </div>
                        <ul class="links collapse "
                                id="xs-pipes-links"
                            >
                                <li class="link">
                                    <a href="../pipes/ObjectIcon.html" >ObjectIcon</a>
                                </li>
                        </ul>
                    </li>
            
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="../miscellaneous.html" ><span class="fa fa-cubes"></span>Miscellaneous</a>
                    </li>
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="../coverage.html" ><span class="fa fa-tasks"></span>Documentation coverage</a>
                    </li>
            
                    <li class="divider"></li>
                    <li class="copyright">
                            Documentation generated using <a href="https://compodoc.github.io/website/" target="_blank">
                                        <img src="..//images/compodoc-vectorise.svg" class="img-responsive">
                            </a>
                    </li>
            
                </ul>
            
            </nav>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <nav>
                   
                       <ul class="list">
                   
                           <li class="title">
                               <a href="../index.html">Dossierapp documentation</a>
                           </li>
                   
                           <li class="divider"></li>
                   
                               <div id="book-search-input" role="search">
                                   <input type="text" placeholder="Type to search">
                               </div>
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="../index.html"><span class="fa fa-home"></span>Getting started</a>
                               <ul class="links">
                                       <li class="link">
                                           <a 
                                               
                                                href="../overview.html" 
                                                href="../overview.html" 
                                               >
                                               <span class="fa fa-th"></span>Overview
                                           </a>
                                       </li>
                                       <li class="link">
                                         <a href="../index.html" ><span class="fa fa-file-text-o"></span>README</a>
                                       </li>
                                       <li class="link">
                                           <a href="./changelog.html"
                                               >
                                               <span class="fa fa-file-text-o"></span>CHANGELOG
                                           </a>
                                       </li>
                                       <li class="link">
                                           <a href="./license.html"
                                               >
                                               <span class="fa fa-file-text-o"></span>LICENSE
                                           </a>
                                       </li>
                               </ul>
                           </li>
                   
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="../modules.html" >
                                   <div class="menu-toggler linked" data-toggle="collapse"
                                           data-target="#modules-links"
                                   >
                                       <span class="fa fa-archive"></span>
                                       <span class="link-name">Modules</span>
                                       <span class="fa fa-angle-down"></span>
                                   </div>
                               </a>
                               <ul class="links collapse "
                                       id="modules-links"
                   >
                                       <li class="link">
                                           <a href="../modules/AppModule.html" >AppModule</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <div class="simple menu-toggler" data-toggle="collapse"
                                       data-target="#components-links"
                   >
                                   <span class="fa fa-cogs"></span>
                                   <span>Components</span>
                                   <span class="fa fa-angle-down"></span>
                               </div>
                               <ul class="links collapse "
                                       id="components-links"
                   >
                                       <li class="link">
                                           <a href="../components/AttributesPage.html" >AttributesPage</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/EditAttributesPage.html" >EditAttributesPage</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/ImageViewerPage.html" >ImageViewerPage</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/LoginPage.html" >LoginPage</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/MyApp.html" >MyApp</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/NetworkPage.html" >NetworkPage</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/Object2FramesPage.html" >Object2FramesPage</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/OfflinePage.html" >OfflinePage</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/OperationsModal.html" >OperationsModal</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/OverviewPage.html" >OverviewPage</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/PdfViewerPage.html" >PdfViewerPage</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/SettingsPage.html" >SettingsPage</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/TaskPage.html" >TaskPage</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/VideoViewerPage.html" >VideoViewerPage</a>
                                       </li>
                               </ul>
                           </li>
                   
                   
                           <li class="chapter">
                               <div class="simple menu-toggler" data-toggle="collapse"
                                       data-target="#classes-links"
                   >
                                   <span class="fa fa-file-code-o"></span>
                                   <span>Classes</span>
                                   <span class="fa fa-angle-down"></span>
                               </div>
                               <ul class="links collapse "
                                       id="classes-links"
                   >
                                       <li class="link">
                                           <a href="../classes/ConfigMock.html" >ConfigMock</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/FormMock.html" >FormMock</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/MenuMock.html" >MenuMock</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/NavMock.html" >NavMock</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/OverviewPageMock.html" >OverviewPageMock</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/PlatformMock.html" >PlatformMock</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <div class="simple menu-toggler" data-toggle="collapse"
                                       data-target="#injectables-links"
                   >
                                   <span class="fa fa-long-arrow-down"></span>
                                   <span>Injectables</span>
                                   <span class="fa fa-angle-down"></span>
                               </div>
                               <ul class="links collapse "
                                       id="injectables-links"
                   >
                                       <li class="link">
                                           <a href="../injectables/AuthService.html" >AuthService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/DBService.html" >DBService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/ErrorService.html" >ErrorService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/FileService.html" >FileService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/FingerPrintService.html" >FingerPrintService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/HttpInterceptorService.html" >HttpInterceptorService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/LoadingService.html" >LoadingService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/NativeService.html" >NativeService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/NetworkService.html" >NetworkService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/OfflineService.html" >OfflineService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/OperationService.html" >OperationService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/PermissionService.html" >PermissionService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/PersistenceService.html"  data-type="entity-link" class="active" >PersistenceService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/PushService.html" >PushService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/RestService.html" >RestService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/SearchService.html" >SearchService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/SearchService.html" >SearchService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/TaskService.html" >TaskService</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <div class="simple menu-toggler" data-toggle="collapse"
                                       data-target="#interfaces-links"
                   >
                                   <span class="fa fa-info"></span>
                                   <span>Interfaces</span>
                                   <span class="fa fa-angle-down"></span>
                               </div>
                               <ul class="links collapse "
                                       id="interfaces-links"
                   >
                                       <li class="link">
                                           <a href="../interfaces/DBAttributes.html" >DBAttributes</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/DBObject.html" >DBObject</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/DBOfflineObject.html" >DBOfflineObject</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/TIEAttributesEdit.html" >TIEAttributesEdit</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/TIEAttributesView.html" >TIEAttributesView</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/TIELink.html" >TIELink</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/TIEObject.html" >TIEObject</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <div class="simple menu-toggler" data-toggle="collapse"
                                       data-target="#pipes-links"
                   >
                                   <span class="fa fa-plus"></span>
                                   <span>Pipes</span>
                                   <span class="fa fa-angle-down"></span>
                               </div>
                               <ul class="links collapse "
                                       id="pipes-links"
                   >
                                       <li class="link">
                                           <a href="../pipes/ObjectIcon.html" >ObjectIcon</a>
                                       </li>
                               </ul>
                           </li>
                   
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="../miscellaneous.html" ><span class="fa fa-cubes"></span>Miscellaneous</a>
                           </li>
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="../coverage.html" ><span class="fa fa-tasks"></span>Documentation coverage</a>
                           </li>
                   
                           <li class="divider"></li>
                           <li class="copyright">
                                   Documentation generated using <a href="https://compodoc.github.io/website/" target="_blank">
                                               <img src="..//images/compodoc-vectorise.svg" class="img-responsive">
                                   </a>
                           </li>
                   
                       </ul>
                   
                   </nav>
               </div>
               <div class="content injectable">
                   <div class="content-data">






<ol class="breadcrumb">
  <li>Injectables</li>
  <li>PersistenceService</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
    <li class="active">
        <a href="#info" id="info-tab" role="tab" data-toggle="tab" data-link="info">Info</a>
    </li>


    <li>
        <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
    </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/services/persistence.ts</code>
        </p>


            <section>
                <h3 id="constructor">Constructor</h3>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <code>constructor(db: <a href="../injectables/DBService.html">DBService</a>, rest: <a href="../injectables/RestService.html">RestService</a>, auth: <a href="../injectables/AuthService.html">AuthService</a>, toastCtrl: ToastController, translate: TranslateService, error: <a href="../injectables/ErrorService.html">ErrorService</a>)</code>
                                </td>
                            </tr>
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="39" class="link-to-prism">src/services/persistence.ts:39</a></div>
                                        </td>
                                    </tr>
            
                        </tbody>
                    </table>
            </section>

            <section>
                
                    <h3 id="methods">
                        Methods
                    </h3>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> saveReference</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
            <code>saveReference(offlineId: number, localPath: string, data: <a href="../interfaces/TIEObject.html">TIEObject</a>, owner: string, fileType: string)</code>
                                </td>
                            </tr>
            
            
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="59" class="link-to-prism">src/services/persistence.ts:59</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>Save Reference from offline files in database for later usage</p>
            </div>
            
                                        <div class="io-description">
                                                <b>Parameters :</b>
                                                <ul class="jsdoc-params">
                                                        <li>
                                                            <div>
                                                                <b>offlineId</b>
                                                            </div>
                                                            <div>
                                                                <p>the objId from the associated offline object</p>
            
                                                            </div>
                                                        </li>
                                                        <li>
                                                            <div>
                                                                <b>localPath</b>
                                                            </div>
                                                            <div>
                                                                <p>the localpath on the device of the saved file</p>
            
                                                            </div>
                                                        </li>
                                                        <li>
                                                            <div>
                                                                <b>owner</b>
                                                            </div>
                                                            <div>
                                                                <p>the owner of the saved file; only the owner is allowed to read and open the file</p>
            
                                                            </div>
                                                        </li>
                                                        <li>
                                                            <div>
                                                                <b>fileType</b>
                                                            </div>
                                                            <div>
                                                                <p>type of the db object</p>
            
                                                            </div>
                                                        </li>
                                                </ul>
                                        </div>
                                        <div class="io-description">
                                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>
            
                                        </div>
                                            <div class="io-description">
                                                
                                            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> getOfflineReference</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
            <code>getOfflineReference(offlineId: number)</code>
                                </td>
                            </tr>
            
            
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="78" class="link-to-prism">src/services/persistence.ts:78</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>Return all references frmo the currently offline available files</p>
            </div>
            
                                        <div class="io-description">
                                                <b>Parameters :</b>
                                                <ul class="jsdoc-params">
                                                        <li>
                                                            <div>
                                                                <b>offlineId</b>
                                                            </div>
                                                            <div>
                                                                
                                                            </div>
                                                        </li>
                                                </ul>
                                        </div>
                                        <div class="io-description">
                                            <b>Returns : </b>    <code>Promise&lt;&gt;</code>
            
                                        </div>
                                            <div class="io-description">
                                                <blockquote>
            <p>}</p>
            </blockquote>
            
                                            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> deleteByCheckIn</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
            <code>deleteByCheckIn(objects: <a href="../interfaces/DBOfflineObject.html">Array<DBOfflineObject></a>)</code>
                                </td>
                            </tr>
            
            
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="92" class="link-to-prism">src/services/persistence.ts:92</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>Delete in the offline table the row with the associated checkin url</p>
            </div>
            
                                        <div class="io-description">
                                                <b>Parameters :</b>
                                                <ul class="jsdoc-params">
                                                        <li>
                                                            <div>
                                                                <b>objects</b>
                                                            </div>
                                                            <div>
                                                                
                                                            </div>
                                                        </li>
                                                </ul>
                                        </div>
                                        <div class="io-description">
                                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>
            
                                        </div>
                                            <div class="io-description">
                                                
                                            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> createUser</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
            <code>createUser(name: string)</code>
                                </td>
                            </tr>
            
            
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="103" class="link-to-prism">src/services/persistence.ts:103</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>(if not exist) Create the user in the database</p>
            </div>
            
                                        <div class="io-description">
                                                <b>Parameters :</b>
                                                <ul class="jsdoc-params">
                                                        <li>
                                                            <div>
                                                                <b>name</b>
                                                            </div>
                                                            <div>
                                                                
                                                            </div>
                                                        </li>
                                                </ul>
                                        </div>
                                        <div class="io-description">
                                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>
            
                                        </div>
                                            <div class="io-description">
                                                
                                            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> getCurrent</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
            <code>getCurrent()</code>
                                </td>
                            </tr>
            
            
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="114" class="link-to-prism">src/services/persistence.ts:114</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>Returns the currently active / viewed object from variable this.current or from db.
            If fetched from db, this.current will be set too.</p>
            </div>
            
                                        <div class="io-description">
                                        </div>
                                        <div class="io-description">
                                            <b>Returns : </b>    <code>Promise&lt;&gt;</code>
            
                                        </div>
                                            <div class="io-description">
                                                <blockquote>
            <p>}</p>
            </blockquote>
            
                                            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> setCurrent</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
            <code>setCurrent(newCurrent: <a href="../interfaces/TIEObject.html">TIEObject</a>, newParent: number)</code>
                                </td>
                            </tr>
            
            
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="136" class="link-to-prism">src/services/persistence.ts:136</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>Set the currently active / viewed object</p>
            </div>
            
                                        <div class="io-description">
                                                <b>Parameters :</b>
                                                <ul class="jsdoc-params">
                                                        <li>
                                                            <div>
                                                                <b>newCurrent</b>
                                                            </div>
                                                            <div>
                                                                <p>takes an object with filled objlist and links (rel: object + LIST)</p>
            
                                                            </div>
                                                        </li>
                                                        <li>
                                                            <div>
                                                                <b>newParent</b>
                                                            </div>
                                                            <div>
                                                                
                                                            </div>
                                                        </li>
                                                </ul>
                                        </div>
                                        <div class="io-description">
                                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>
            
                                        </div>
                                            <div class="io-description">
                                                
                                            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> addNext</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
            <code>addNext(object: <a href="../interfaces/TIEObject.html">TIEObject</a>)</code>
                                </td>
                            </tr>
            
            
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="152" class="link-to-prism">src/services/persistence.ts:152</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>Prefetch the next level of objects (next 5 or 10) and save it to the database (for faster down-navigation).
            If the object is already in DB, a check is performed if the object is still up-to-date.</p>
            </div>
            
                                        <div class="io-description">
                                                <b>Parameters :</b>
                                                <ul class="jsdoc-params">
                                                        <li>
                                                            <div>
                                                                <b>object</b>
                                                            </div>
                                                            <div>
                                                                <p>The current navigated object</p>
            
                                                            </div>
                                                        </li>
                                                </ul>
                                        </div>
                                        <div class="io-description">
                                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>
            
                                        </div>
                                            <div class="io-description">
                                                
                                            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> updatePrevious</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
            <code>updatePrevious(object: <a href="../interfaces/TIEObject.html">TIEObject</a>)</code>
                                </td>
                            </tr>
            
            
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="211" class="link-to-prism">src/services/persistence.ts:211</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>Update the parent of the requested object (for faster up-navigation)</p>
            </div>
            
                                        <div class="io-description">
                                                <b>Parameters :</b>
                                                <ul class="jsdoc-params">
                                                        <li>
                                                            <div>
                                                                <b>object</b>
                                                            </div>
                                                            <div>
                                                                <p>at least {objId: number}. The object that has to be updated, normally the old current object</p>
            
                                                            </div>
                                                        </li>
                                                </ul>
                                        </div>
                                        <div class="io-description">
                                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>
            
                                        </div>
                                            <div class="io-description">
                                                
                                            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> cacheFileObjects</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
            <code>cacheFileObjects(object: <a href="../interfaces/TIEObject.html">TIEObject</a>, objList: <a href="../interfaces/TIEObject.html">Array<TIEObject></a>)</code>
                                </td>
                            </tr>
            
            
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="259" class="link-to-prism">src/services/persistence.ts:259</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>Build up this.objectCache with the objlist assigned to an object</p>
            </div>
            
                                        <div class="io-description">
                                                <b>Parameters :</b>
                                                <ul class="jsdoc-params">
                                                        <li>
                                                            <div>
                                                                <b>object</b>
                                                            </div>
                                                            <div>
                                                                <p>Parent that holds the objList</p>
            
                                                            </div>
                                                        </li>
                                                        <li>
                                                            <div>
                                                                <b>objList</b>
                                                            </div>
                                                            <div>
                                                                <p>List that has to be assigned</p>
            
                                                            </div>
                                                        </li>
                                                </ul>
                                        </div>
                                        <div class="io-description">
                                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>
            
                                        </div>
                                            <div class="io-description">
                                                
                                            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> updateSingleObjectInCache</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
            <code>updateSingleObjectInCache(object: <a href="../interfaces/TIEObject.html">TIEObject</a>, parent: number)</code>
                                </td>
                            </tr>
            
            
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="297" class="link-to-prism">src/services/persistence.ts:297</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>Update a single object in the cache</p>
            </div>
            
                                        <div class="io-description">
                                                <b>Parameters :</b>
                                                <ul class="jsdoc-params">
                                                        <li>
                                                            <div>
                                                                <b>object</b>
                                                            </div>
                                                            <div>
                                                                
                                                            </div>
                                                        </li>
                                                        <li>
                                                            <div>
                                                                <b>parent</b>
                                                            </div>
                                                            <div>
                                                                
                                                            </div>
                                                        </li>
                                                </ul>
                                        </div>
                                        <div class="io-description">
                                            <b>Returns : </b>    <code>void</code>
            
                                        </div>
                                            <div class="io-description">
                                                
                                            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> getFromCache</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
            <code>getFromCache(parentId: number, childId: number)</code>
                                </td>
                            </tr>
            
            
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="320" class="link-to-prism">src/services/persistence.ts:320</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>Returns a list, single object or null if not in cache</p>
            </div>
            
                                        <div class="io-description">
                                                <b>Parameters :</b>
                                                <ul class="jsdoc-params">
                                                        <li>
                                                            <div>
                                                                <b>parentId</b>
                                                            </div>
                                                            <div>
                                                                
                                                            </div>
                                                        </li>
                                                        <li>
                                                            <div>
                                                                <b>childId</b>
                                                            </div>
                                                            <div>
                                                                
                                                            </div>
                                                        </li>
                                                </ul>
                                        </div>
                                        <div class="io-description">
                                            <b>Returns : </b>    <code>||</code>
            
                                        </div>
                                            <div class="io-description">
                                                <p>: TIEObject} | TIEObject | null</p>
            
                                            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> updateDBObject</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
            <code>updateDBObject(object: <a href="../interfaces/TIEObject.html">TIEObject</a>, parent: number)</code>
                                </td>
                            </tr>
            
            
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="333" class="link-to-prism">src/services/persistence.ts:333</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>Access method to db service method updateObjects.
            The method used inside uses the current parent id!</p>
            </div>
            
                                        <div class="io-description">
                                                <b>Parameters :</b>
                                                <ul class="jsdoc-params">
                                                        <li>
                                                            <div>
                                                                <b>object</b>
                                                            </div>
                                                            <div>
                                                                
                                                            </div>
                                                        </li>
                                                        <li>
                                                            <div>
                                                                <b>parent</b>
                                                            </div>
                                                            <div>
                                                                
                                                            </div>
                                                        </li>
                                                </ul>
                                        </div>
                                        <div class="io-description">
                                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>
            
                                        </div>
                                            <div class="io-description">
                                                
                                            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> extractObjectClassID</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
            <code>extractObjectClassID(object: <a href="../interfaces/TIEObject.html">TIEObject</a>)</code>
                                </td>
                            </tr>
            
            
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="343" class="link-to-prism">src/services/persistence.ts:343</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>Access method to db service method extractObjectClassID</p>
            </div>
            
                                        <div class="io-description">
                                                <b>Parameters :</b>
                                                <ul class="jsdoc-params">
                                                        <li>
                                                            <div>
                                                                <b>object</b>
                                                            </div>
                                                            <div>
                                                                
                                                            </div>
                                                        </li>
                                                </ul>
                                        </div>
                                        <div class="io-description">
                                            <b>Returns : </b>    <code>number</code>
            
                                        </div>
                                            <div class="io-description">
                                                
                                            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> getObjectFromDB</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
            <code>getObjectFromDB(object: <a href="../interfaces/TIEObject.html">TIEObject</a>)</code>
                                </td>
                            </tr>
            
            
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="353" class="link-to-prism">src/services/persistence.ts:353</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>Returns single object from db.</p>
            </div>
            
                                        <div class="io-description">
                                                <b>Parameters :</b>
                                                <ul class="jsdoc-params">
                                                        <li>
                                                            <div>
                                                                <b>object</b>
                                                            </div>
                                                            <div>
                                                                <p>Has to be at least {objId: number}</p>
            
                                                            </div>
                                                        </li>
                                                </ul>
                                        </div>
                                        <div class="io-description">
                                            <b>Returns : </b>    <code>Promise&lt;&gt;</code>
            
                                        </div>
                                            <div class="io-description">
                                                <blockquote>
            <p>}</p>
            </blockquote>
            
                                            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> setAsFavorites</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
            <code>setAsFavorites(object: <a href="../interfaces/TIEObject.html">TIEObject</a>)</code>
                                </td>
                            </tr>
            
            
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="363" class="link-to-prism">src/services/persistence.ts:363</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>Access method to rest service method setAsFavorites</p>
            </div>
            
                                        <div class="io-description">
                                                <b>Parameters :</b>
                                                <ul class="jsdoc-params">
                                                        <li>
                                                            <div>
                                                                <b>objId</b>
                                                            </div>
                                                            <div>
                                                                
                                                            </div>
                                                        </li>
                                                </ul>
                                        </div>
                                        <div class="io-description">
                                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>
            
                                        </div>
                                            <div class="io-description">
                                                
                                            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> removeFromFavorite</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
            <code>removeFromFavorite(objId: number)</code>
                                </td>
                            </tr>
            
            
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="380" class="link-to-prism">src/services/persistence.ts:380</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>Access method to rest service method removeFromFavorite</p>
            </div>
            
                                        <div class="io-description">
                                                <b>Parameters :</b>
                                                <ul class="jsdoc-params">
                                                        <li>
                                                            <div>
                                                                <b>objId</b>
                                                            </div>
                                                            <div>
                                                                
                                                            </div>
                                                        </li>
                                                </ul>
                                        </div>
                                        <div class="io-description">
                                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>
            
                                        </div>
                                            <div class="io-description">
                                                
                                            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> getEntryPoint</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
            <code>getEntryPoint()</code>
                                </td>
                            </tr>
            
            
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="389" class="link-to-prism">src/services/persistence.ts:389</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>Access method to rest service method getEntryPoint</p>
            </div>
            
                                        <div class="io-description">
                                        </div>
                                        <div class="io-description">
                                            <b>Returns : </b>    <code>Promise&lt;&gt;</code>
            
                                        </div>
                                            <div class="io-description">
                                                
                                            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> storeFingerPrintToken</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
            <code>storeFingerPrintToken(username: string, token: string)</code>
                                </td>
                            </tr>
            
            
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="393" class="link-to-prism">src/services/persistence.ts:393</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
            
                                        <div class="io-description">
                                            <b>Returns : </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> getObjectFromServer</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
            <code>getObjectFromServer(link: string, put: boolean)</code>
                                </td>
                            </tr>
            
            
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="404" class="link-to-prism">src/services/persistence.ts:404</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>Access method to rest service method requestURLGet and requestURLPut</p>
            </div>
            
                                        <div class="io-description">
                                                <b>Parameters :</b>
                                                <ul class="jsdoc-params">
                                                        <li>
                                                            <div>
                                                                <b>link</b>
                                                            </div>
                                                            <div>
                                                                
                                                            </div>
                                                        </li>
                                                        <li>
                                                            <div>
                                                                <b>put</b>
                                                            </div>
                                                            <div>
                                                                
                                                            </div>
                                                        </li>
                                                </ul>
                                        </div>
                                        <div class="io-description">
                                            <b>Returns : </b>    <code>Promise&lt;&gt;</code>
            
                                        </div>
                                            <div class="io-description">
                                                
                                            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> getObjclassIdFromURI</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
            <code>getObjclassIdFromURI(uri: string, urlGetId: string)</code>
                                </td>
                            </tr>
            
            
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="415" class="link-to-prism">src/services/persistence.ts:415</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>Access method to rest service method getObjclassIdFromURI</p>
            </div>
            
                                        <div class="io-description">
                                                <b>Parameters :</b>
                                                <ul class="jsdoc-params">
                                                        <li>
                                                            <div>
                                                                <b>uri</b>
                                                            </div>
                                                            <div>
                                                                
                                                            </div>
                                                        </li>
                                                        <li>
                                                            <div>
                                                                <b>urlGetId</b>
                                                            </div>
                                                            <div>
                                                                
                                                            </div>
                                                        </li>
                                                </ul>
                                        </div>
                                        <div class="io-description">
                                            <b>Returns : </b>    <code>Promise&lt;number&gt;</code>
            
                                        </div>
                                            <div class="io-description">
                                                
                                            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> createUserInDB</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
            <code>createUserInDB(names: Array<string>)</code>
                                </td>
                            </tr>
            
            
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="425" class="link-to-prism">src/services/persistence.ts:425</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>Create user in db</p>
            </div>
            
                                        <div class="io-description">
                                                <b>Parameters :</b>
                                                <ul class="jsdoc-params">
                                                        <li>
                                                            <div>
                                                                <b>names</b>
                                                            </div>
                                                            <div>
                                                                
                                                            </div>
                                                        </li>
                                                </ul>
                                        </div>
                                        <div class="io-description">
                                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>
            
                                        </div>
                                            <div class="io-description">
                                                
                                            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> createObjectsInDB</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
            <code>createObjectsInDB(objects: <a href="../interfaces/TIEObject.html">Array<TIEObject></a>, parent: number, active: number)</code>
                                </td>
                            </tr>
            
            
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="437" class="link-to-prism">src/services/persistence.ts:437</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>Create objects in db</p>
            </div>
            
                                        <div class="io-description">
                                                <b>Parameters :</b>
                                                <ul class="jsdoc-params">
                                                        <li>
                                                            <div>
                                                                <b>objects</b>
                                                            </div>
                                                            <div>
                                                                
                                                            </div>
                                                        </li>
                                                        <li>
                                                            <div>
                                                                <b>parent</b>
                                                            </div>
                                                            <div>
                                                                
                                                            </div>
                                                        </li>
                                                        <li>
                                                            <div>
                                                                <b>active</b>
                                                            </div>
                                                            <div>
                                                                
                                                            </div>
                                                        </li>
                                                </ul>
                                        </div>
                                        <div class="io-description">
                                            <b>Returns : </b>    <code>void</code>
            
                                        </div>
                                            <div class="io-description">
                                                
                                            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> jsonListToArray</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
            <code>jsonListToArray(jsonList: any)</code>
                                </td>
                            </tr>
            
            
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="446" class="link-to-prism">src/services/persistence.ts:446</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>Converts a json list to an array</p>
            </div>
            
                                        <div class="io-description">
                                                <b>Parameters :</b>
                                                <ul class="jsdoc-params">
                                                        <li>
                                                            <div>
                                                                <b>jsonList</b>
                                                            </div>
                                                            <div>
                                                                <p>Of type {[key: string]: any}</p>
            
                                                            </div>
                                                        </li>
                                                </ul>
                                        </div>
                                        <div class="io-description">
                                            <b>Returns : </b>    <code>Array&lt;&gt;</code>
            
                                        </div>
                                            <div class="io-description">
                                                
                                            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> filterLinks</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
            <code>filterLinks(object: <a href="../interfaces/TIEObject.html">TIEObject</a>)</code>
                                </td>
                            </tr>
            
            
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="462" class="link-to-prism">src/services/persistence.ts:462</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>Filter the links of an object and return the viewable/implemented links</p>
            </div>
            
                                        <div class="io-description">
                                                <b>Parameters :</b>
                                                <ul class="jsdoc-params">
                                                        <li>
                                                            <div>
                                                                <b>object</b>
                                                            </div>
                                                            <div>
                                                                
                                                            </div>
                                                        </li>
                                                </ul>
                                        </div>
                                        <div class="io-description">
                                            <b>Returns : </b>    <code>Array&lt;&gt;</code>
            
                                        </div>
                                            <div class="io-description">
                                                
                                            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> stringCompare</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
            <code>stringCompare(s1: string, s2: string)</code>
                                </td>
                            </tr>
            
            
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="492" class="link-to-prism">src/services/persistence.ts:492</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>Compare two strings</p>
            </div>
            
                                        <div class="io-description">
                                                <b>Parameters :</b>
                                                <ul class="jsdoc-params">
                                                        <li>
                                                            <div>
                                                                <b>s1</b>
                                                            </div>
                                                            <div>
                                                                
                                                            </div>
                                                        </li>
                                                        <li>
                                                            <div>
                                                                <b>s2</b>
                                                            </div>
                                                            <div>
                                                                
                                                            </div>
                                                        </li>
                                                </ul>
                                        </div>
                                        <div class="io-description">
                                            <b>Returns : </b>    <code>boolean</code>
            
                                        </div>
                                            <div class="io-description">
                                                
                                            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> applyUserConfig</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
            <code>applyUserConfig(config: any)</code>
                                </td>
                            </tr>
            
            
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="496" class="link-to-prism">src/services/persistence.ts:496</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
            
                                        <div class="io-description">
                                            <b>Returns : </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> updateColorScheme</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
            <code>updateColorScheme(scheme: string)</code>
                                </td>
                            </tr>
            
            
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="514" class="link-to-prism">src/services/persistence.ts:514</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>Apply custom theme selected by the user</p>
            </div>
            
                                        <div class="io-description">
                                                <b>Parameters :</b>
                                                <ul class="jsdoc-params">
                                                        <li>
                                                            <div>
                                                                <b>scheme</b>
                                                            </div>
                                                            <div>
                                                                
                                                            </div>
                                                        </li>
                                                </ul>
                                        </div>
                                        <div class="io-description">
                                            <b>Returns : </b>    <code>void</code>
            
                                        </div>
                                            <div class="io-description">
                                                
                                            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> updateUserConfig</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
            <code>updateUserConfig(name: string, config: any)</code>
                                </td>
                            </tr>
            
            
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="534" class="link-to-prism">src/services/persistence.ts:534</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>Set new config in DB.</p>
            </div>
            
                                        <div class="io-description">
                                                <b>Parameters :</b>
                                                <ul class="jsdoc-params">
                                                        <li>
                                                            <div>
                                                                <b>name</b>
                                                            </div>
                                                            <div>
                                                                
                                                            </div>
                                                        </li>
                                                        <li>
                                                            <div>
                                                                <b>config</b>
                                                            </div>
                                                            <div>
                                                                
                                                            </div>
                                                        </li>
                                                </ul>
                                        </div>
                                        <div class="io-description">
                                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>
            
                                        </div>
                                            <div class="io-description">
                                                
                                            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> getUserFromDB</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
            <code>getUserFromDB(username: string)</code>
                                </td>
                            </tr>
            
            
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="556" class="link-to-prism">src/services/persistence.ts:556</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>Get user by username in db</p>
            </div>
            
                                        <div class="io-description">
                                                <b>Parameters :</b>
                                                <ul class="jsdoc-params">
                                                        <li>
                                                            <div>
                                                                <b>username</b>
                                                            </div>
                                                            <div>
                                                                
                                                            </div>
                                                        </li>
                                                </ul>
                                        </div>
                                        <div class="io-description">
                                            <b>Returns : </b>    <code>void</code>
            
                                        </div>
                                            <div class="io-description">
                                                <blockquote>
            <p>}</p>
            </blockquote>
            
                                            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> getUserConfig</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
            <code>getUserConfig(username: string)</code>
                                </td>
                            </tr>
            
            
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="567" class="link-to-prism">src/services/persistence.ts:567</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>Get last saved user config from db</p>
            </div>
            
                                        <div class="io-description">
                                                <b>Parameters :</b>
                                                <ul class="jsdoc-params">
                                                        <li>
                                                            <div>
                                                                <b>username</b>
                                                            </div>
                                                            <div>
                                                                
                                                            </div>
                                                        </li>
                                                </ul>
                                        </div>
                                        <div class="io-description">
                                            <b>Returns : </b>    <code>any</code>
            
                                        </div>
                                            <div class="io-description">
                                                
                                            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> initDB</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
            <code>initDB()</code>
                                </td>
                            </tr>
            
            
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="576" class="link-to-prism">src/services/persistence.ts:576</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>Setup internal sqlite storage with the necessary tables and columns</p>
            </div>
            
                                        <div class="io-description">
                                        </div>
                                        <div class="io-description">
                                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>
            
                                        </div>
                                            <div class="io-description">
                                                
                                            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
            </section>

            <section>
                
                    <h3 id="inputs">
                        Properties
                    </h3>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> current</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <code>current:     <code><a href="../interfaces/DBObject.html" target="_self" >BehaviorSubject&lt;DBObject&gt;</a></code>
            </bcode>
                                </td>
                            </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <i>Type : </i>    <code><a href="../interfaces/DBObject.html" target="_self" >BehaviorSubject&lt;DBObject&gt;</a></code>
            
                                    </td>
                                </tr>
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="27" class="link-to-prism">src/services/persistence.ts:27</a></div>
                                        </td>
                                    </tr>
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-description"><p>Observable holding the currently viewed object</p>
            </div>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                  <div class="io-description">
                                  </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> items</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <code>items:     <code>BehaviorSubject&lt;Array&gt;</code>
            </bcode>
                                </td>
                            </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <i>Type : </i>    <code>BehaviorSubject&lt;Array&gt;</code>
            
                                    </td>
                                </tr>
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="33" class="link-to-prism">src/services/persistence.ts:33</a></div>
                                        </td>
                                    </tr>
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-description"><p>Observable holding the currently viewed items array</p>
            </div>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                  <div class="io-description">
                                  </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> objectCache</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <code>objectCache:     <code></code>
            </bcode>
                                </td>
                            </tr>
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="21" class="link-to-prism">src/services/persistence.ts:21</a></div>
                                        </td>
                                    </tr>
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-description"><p>hashmap for object caching; will be used in overview page</p>
            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> schemeObserver</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <code>schemeObserver:     <code>BehaviorSubject&lt;string&gt;</code>
            </bcode>
                                </td>
                            </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <i>Type : </i>    <code>BehaviorSubject&lt;string&gt;</code>
            
                                    </td>
                                </tr>
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="39" class="link-to-prism">src/services/persistence.ts:39</a></div>
                                        </td>
                                    </tr>
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-description"><p>Observer for style changes</p>
            </div>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                  <div class="io-description">
                                  </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
            </section>
    </div>


    <div class="tab-pane fade tab-source-code" id="source">
        <pre class="line-numbers"><code class="language-typescript">import { Injectable } from &#x27;@angular/core&#x27;;
import { DBService } from &#x27;./db&#x27;;
import { StatusBar } from &#x27;ionic-native&#x27;;
import { AuthService } from &#x27;./auth&#x27;;
import { RestService } from &#x27;./rest&#x27;;
import { DBObject, DBOfflineObject } from &#x27;../app/models/DBObject&#x27;;
import { TIELink, TIEObject } from &#x27;../app/models/TIEObject&#x27;;
import * as _ from &#x27;../app/consts/objclassConsts.json&#x27;;
import { BehaviorSubject } from &#x27;rxjs&#x27;;
import { ToastController } from &#x27;ionic-angular&#x27;;
import { TranslateService } from &#x27;ng2-translate&#x27;;
import { ErrorService } from &#x27;./error&#x27;;

declare let window;

@Injectable()
export class PersistenceService {
    /**
     * hashmap for object caching; will be used in overview page
     */
    objectCache: {[key: string]: {[key: string]: TIEObject}};
    /**
     * Observable holding the currently viewed object
     *
     * @type {BehaviorSubject&lt;DBObject&gt;}
     */
    current: BehaviorSubject&lt;DBObject&gt; &#x3D; new BehaviorSubject&lt;DBObject&gt;(&lt;DBObject&gt;{});
    /**
     * Observable holding the currently viewed items array
     *
     * @type {BehaviorSubject&lt;Array&lt;TIEObject&gt;&gt;}
     */
    items: BehaviorSubject&lt;Array&lt;TIEObject&gt;&gt; &#x3D; new BehaviorSubject&lt;Array&lt;TIEObject&gt;&gt;(&lt;Array&lt;TIEObject&gt;&gt;[]);
    /**
     * Observer for style changes
     *
     * @type {BehaviorSubject&lt;string&gt;}
     */
    schemeObserver: BehaviorSubject&lt;string&gt; &#x3D; new BehaviorSubject&lt;string&gt;(&#x27;&#x27;);

    constructor(private db: DBService,
                private rest: RestService,
                private auth: AuthService,
                private toastCtrl: ToastController,
                private translate: TranslateService,
                private error: ErrorService) {
        console.log(&#x27;Persistence Service loaded&#x27;);
        this.objectCache &#x3D; {};
    }
    /**
     * Save Reference from offline files in database for later usage
     *
     * @param offlineId the objId from the associated offline object
     * @param localPath the localpath on the device of the saved file
     * @param owner the owner of the saved file; only the owner is allowed to read and open the file
     * @param fileType type of the db object
     * @returns {Promise&lt;void&gt;}
     */
    saveReference(offlineId: number, localPath: string,
                  data: TIEObject, owner: string, fileType: string): Promise&lt;void&gt; {
        let dbOfflineObject: DBOfflineObject &#x3D; {
            offlineId: offlineId,
            localpath: localPath,
            data: JSON.stringify(data),
            owner: owner,
            fileType: fileType,
        };
        return this.db.createOfflineFiles([dbOfflineObject])
            .catch(err &#x3D;&gt; console.error(&#x27;saveReference Error: &#x27; + err));
    }

    /**
     * Return all references frmo the currently offline available files
     *
     * @param offlineId
     * @returns {Promise&lt;DBOfflineObject|Array&lt;DBOfflineObject&gt;&gt;}
     */
    getOfflineReference(offlineId?: number): Promise&lt;DBOfflineObject | Array&lt;DBOfflineObject&gt;&gt; {
        if (offlineId) {
            return this.db.readOfflineFiles({offlineId: offlineId}, {owner: this.auth.username.value});
        } else {
            return this.db.readOfflineFiles({owner: this.auth.username.value});
        }
    }

    /**
     * Delete in the offline table the row with the associated checkin url
     *
     * @param objects
     * @returns {Promise&lt;void&gt;}
     */
    deleteByCheckIn(objects: Array&lt;DBOfflineObject&gt;): Promise&lt;void&gt; {
        return this.db.deleteOfflineFiles(objects)
            .catch(err &#x3D;&gt; console.error(&#x27;deleteByCheckIn Error: &#x27; + err));
    }

    /**
     * (if not exist) Create the user in the database
     *
     * @param name
     * @returns {Promise&lt;void&gt;}
     */
    createUser(name: string): Promise&lt;void&gt; {
        return this.db.createUsers([name])
            .catch(err &#x3D;&gt; console.error(&#x27;createUser Error: &#x27; + err));
    }

    /**
     * Returns the currently active / viewed object from variable this.current or from db.
     * If fetched from db, this.current will be set too.
     *
     * @returns {Promise&lt;DBObject | undefined&gt;}
     */
    getCurrent(): Promise&lt;DBObject | undefined&gt; {
        return new Promise((resolve, reject) &#x3D;&gt; {
            if (this.current.value &amp;&amp; Object.keys(this.current.value).length !&#x3D;&#x3D; 0) {
                resolve(Object.assign({}, this.current.value));
            } else {
                this.db.readObjects({active: 1}, {owner: &#x27;&quot;&#x27; + this.auth.username.value + &#x27;&quot;&#x27;})
                    .then(fromDB &#x3D;&gt; {
                        this.current.next(Object.assign({}, &lt;DBObject&gt;fromDB));
                        resolve(fromDB);
                    })
                    .catch(err &#x3D;&gt; reject(err));
            }
        });
    }

    /**
     * Set the currently active / viewed object
     *
     * @param newCurrent takes an object with filled objlist and links (rel: object + LIST)
     * @param newParent
     * @returns {Promise&lt;void&gt;}
     */
    setCurrent(newCurrent: TIEObject, newParent: number): Promise&lt;void&gt; {
        return this.db.updateObjects([newCurrent], this.auth.username.value, newParent, 1)
            .then(() &#x3D;&gt; this.db.readObjects({active: 1}, {owner: &#x27;&quot;&#x27; + this.auth.username.value + &#x27;&quot;&#x27;}))
            .then((fromDB: DBObject) &#x3D;&gt; {
                console.log(&#x27;setCurrent DB&#x27;, fromDB);
                this.current.next(Object.assign({}, fromDB));
            });
    }

    /**
     * Prefetch the next level of objects (next 5 or 10) and save it to the database (for faster down-navigation).
     * If the object is already in DB, a check is performed if the object is still up-to-date.
     *
     * @param object The current navigated object
     * @returns {Promise&lt;void&gt;}
     */
    addNext(object: TIEObject): Promise&lt;void&gt; {
        // filter for Dossier and Register
        let objList &#x3D; this.jsonListToArray(object.objList).filter(o &#x3D;&gt; {
            let type &#x3D; this.extractObjectClassID(o);
            return (type &#x3D;&#x3D;&#x3D; _.Dossier || type &#x3D;&#x3D;&#x3D; _.Register);
        });

        // execute object request and db read
        let objs &#x3D; Promise.all(objList.map(o &#x3D;&gt; Promise.all(
            [this.rest.getObject(o),
                this.db.readObjects({id: o.objId}, {owner: &#x27;&quot;&#x27; + this.auth.username.value + &#x27;&quot;&#x27;})])));

        // prepare lists
        let insertList &#x3D; [];
        let updateList &#x3D; [];

        // compare db and server object and do LIST + insert/LIST + update/do nothing if not changed
        return objs.then((res: Array&lt;any&gt;) &#x3D;&gt; Promise.all(res.map((r) &#x3D;&gt; {
            let dbObj &#x3D; (r[1]) ? (&lt;TIEObject&gt;JSON.parse((&lt;DBObject&gt;r[1]).data)) : null;
            let serverObj &#x3D; (&lt;TIEObject&gt;r[0]);
            if (r[1] &#x3D;&#x3D;&#x3D; undefined || r[1] &#x3D;&#x3D;&#x3D; null) {
                // LIST
                return this.rest.requestURLGet(serverObj.links.find(l &#x3D;&gt; l.rel &#x3D;&#x3D;&#x3D; &#x27;LIST&#x27;).href)
                // obj merge
                    .then(res1 &#x3D;&gt; {
                        let next &#x3D; res1.links.find(it &#x3D;&gt; it.rel &#x3D;&#x3D;&#x3D; &#x27;next&#x27;);
                        if (next) serverObj.links &#x3D; serverObj.links.concat(next);
                        serverObj.objList &#x3D; res1.objList;
                    })
                    // insert DB
                    .then(() &#x3D;&gt; insertList.push(serverObj));
            } else if (serverObj.attributes.lastUpdate &#x3D;&#x3D;&#x3D; undefined ||
                new Date(dbObj.attributes.lastUpdate) &lt; new Date(serverObj.attributes.lastUpdate) ||
                !this.stringCompare(JSON.stringify(dbObj.objList), JSON.stringify(serverObj.objList))) {
                // LIST
                return this.rest.requestURLGet(serverObj.links.find(l &#x3D;&gt; l.rel &#x3D;&#x3D;&#x3D; &#x27;LIST&#x27;).href)
                // obj merge
                    .then(res2 &#x3D;&gt; {
                        let next &#x3D; res2.links.find(it &#x3D;&gt; it.rel &#x3D;&#x3D;&#x3D; &#x27;next&#x27;);
                        if (next) serverObj.links &#x3D; serverObj.links.concat(next);
                        serverObj.objList &#x3D; res2.objList;
                    })
                    // update DB
                    .then(() &#x3D;&gt; updateList.push(serverObj));
            }
        })))
            .then(() &#x3D;&gt; {
                if (insertList.length &gt; 0) this.db.createObjects(insertList, this.auth.username.value, object.objId);
                if (updateList.length &gt; 0) this.db.updateObjects(updateList, this.auth.username.value, object.objId);
            })
            .catch(err &#x3D;&gt; console.error(&#x27;addnext Error: &#x27;, err));
    }

    /**
     * Update the parent of the requested object (for faster up-navigation)
     *
     * @param object at least {objId: number}. The object that has to be updated, normally the old current object
     * @returns {Promise&lt;void&gt;}
     */
    updatePrevious(object: TIEObject): Promise&lt;void&gt; {
        return this.db.readObjects({id: object.objId}, {owner: &#x27;&quot;&#x27; + this.auth.username.value + &#x27;&quot;&#x27;})
            .then((dbParentObj: DBObject) &#x3D;&gt; {
                let parsedObj &#x3D; Object.assign({}, JSON.parse(dbParentObj.data));
                return this.rest.getObject(parsedObj)
                    .then(obj &#x3D;&gt; {
                        if (object.attributes.lastUpdate &#x3D;&#x3D;&#x3D; undefined ||
                            new Date(object.attributes.lastUpdate) &lt; new Date(obj.attributes.lastUpdate) ||
                            !this.stringCompare(JSON.stringify(object.objList), JSON.stringify(obj.objList))) {
                            return new Promise((resolve, reject) &#x3D;&gt; {
                                // Check if that it&#x27;s not Favorites listing
                                let link &#x3D; parsedObj.links.find(l &#x3D;&gt; l.rel &#x3D;&#x3D;&#x3D; &#x27;LIST&#x27; || l.rel &#x3D;&#x3D;&#x3D; &#x27;FIND&#x27;);
                                if (link.rel &#x3D;&#x3D;&#x3D; &#x27;LIST&#x27;) {
                                    this.rest.requestURLGet(link.href)
                                        .then(listing &#x3D;&gt; resolve(listing));
                                } else if (link.rel &#x3D;&#x3D;&#x3D; &#x27;FIND&#x27;) {
                                    this.rest.requestURLPut(link.href)
                                        .then(listing &#x3D;&gt; {
                                            let merge &#x3D; listing;
                                            merge.links &#x3D; Object.assign(parsedObj.links, merge.links);
                                            resolve(merge);
                                        });
                                } else {
                                    reject(&#x27;No link found matching any case&#x27;);
                                }
                            })
                                .then((listObj: TIEObject) &#x3D;&gt; {
                                    let merge &#x3D; obj;
                                    let next &#x3D; listObj.links.find(it &#x3D;&gt; it.rel &#x3D;&#x3D;&#x3D; &#x27;next&#x27;);
                                    if (next) merge.links &#x3D; merge.links.concat(next);
                                    merge.objList &#x3D; listObj.objList;
                                    return merge;
                                })
                                .then(merged &#x3D;&gt; this.db.updateObjects(
                                    [merged], this.auth.username.value, dbParentObj.parent));
                        }
                    })
                    .catch(err &#x3D;&gt; console.error(&#x27;updatePrevious Error: &#x27;, err));
            });
    }

    /**
     * Build up this.objectCache with the objlist assigned to an object
     *
     * @param object Parent that holds the objList
     * @param objList List that has to be assigned
     * @returns {Promise&lt;void&gt;}
     */
    cacheFileObjects(object: TIEObject, objList: Array&lt;TIEObject&gt;): Promise&lt;void&gt; {
        return Promise.all(objList.map(o &#x3D;&gt; {
            let type &#x3D; this.extractObjectClassID(o);
            // is file object
            if (type !&#x3D;&#x3D; _.Register &amp;&amp; type !&#x3D;&#x3D; _.Dossier) {
                // is in first dimension
                if (!(object.objId in this.objectCache)) this.objectCache[object.objId] &#x3D; {};
                // is in second dimension
                if (o.objId in this.objectCache[object.objId]) {
                    let child &#x3D; this.objectCache[object.objId][o.objId];
                    let child2 &#x3D; object.objList[Object.keys(object.objList)
                        .filter(f &#x3D;&gt; parseInt(f.substring(f.indexOf(&#x27;[&#x27;) + 1, f.indexOf(&#x27;]&#x27;)), 10) &#x3D;&#x3D;&#x3D; child.objId)[0]];
                    // compare child
                    if (!child2) {
                        delete this.objectCache[object.objId][o.objId];
                    } else if (child.attributes.lastUpdate &#x3D;&#x3D;&#x3D; undefined ||
                        new Date(child.attributes.lastUpdate) &lt; new Date(child2.attributes.lastUpdate) ||
                        !this.stringCompare(JSON.stringify(child.objList), JSON.stringify(child2.objList))) {
                        return this.rest.getObject(o)
                            .then(obj &#x3D;&gt; {
                                this.objectCache[object.objId][o.objId] &#x3D; obj;
                            });
                    }
                } else {
                    return this.rest.getObject(o)
                        .then(obj &#x3D;&gt; this.objectCache[object.objId][o.objId] &#x3D; obj);
                }
            }
        }))
            .catch(err &#x3D;&gt; console.error(&#x27;cacheFileObjects Error: &#x27;, err));
    }

    /**
     * Update a single object in the cache
     *
     * @param object
     * @param parent
     */
    updateSingleObjectInCache(object: TIEObject, parent?: number): void {
        let type &#x3D; this.extractObjectClassID(object);
        // is file object
        if (type !&#x3D;&#x3D; _.Register &amp;&amp; type !&#x3D;&#x3D; _.Dossier) {
            if (parent) {
                this.objectCache[parent][object.objId] &#x3D; object;
            } else {
                let parentKeys &#x3D; Object.keys(this.objectCache);
                let parentThatHasChild &#x3D; parentKeys.find(o &#x3D;&gt; Object.keys(this.objectCache[o])
                    .find(f &#x3D;&gt; parseInt(f, 10) &#x3D;&#x3D;&#x3D; object.objId) !&#x3D;&#x3D; undefined);
                console.log(&#x27;updateSingleObjectInCache&#x27;, parentKeys, parentThatHasChild);
                if (parentThatHasChild) this.objectCache[parentThatHasChild][object.objId] &#x3D; object;
            }
        }
    }

    /**
     * Returns a list, single object or null if not in cache
     *
     * @param parentId
     * @param childId
     * @returns {[key: string]: TIEObject} | TIEObject | null
     */
    getFromCache(parentId: number, childId?: number): {[key: string]: TIEObject} | TIEObject | null {
        let returnValue &#x3D; (childId) ? this.objectCache[parentId][childId] : this.objectCache[parentId];
        return (returnValue) ? Object.assign({}, returnValue) : null;
    }

    /**
     * Access method to db service method updateObjects.
     * The method used inside uses the current parent id!
     *
     * @param object
     * @param parent
     * @returns {Promise&lt;void&gt;}
     */
    updateDBObject(object: TIEObject, parent?: number): Promise&lt;void&gt;  {
        return this.db.updateObjects([object], this.auth.username.value, (parent) ? parent : this.current.value.parent);
    }

    /**
     * Access method to db service method extractObjectClassID
     *
     * @param object
     * @returns {number}
     */
    extractObjectClassID(object: TIEObject): number {
        return this.db.extractObjectClassID(object);
    }

    /**
     * Returns single object from db.
     *
     * @param object Has to be at least {objId: number}
     * @returns {Promise&lt;DBObject|Array&lt;DBObject&gt;&gt;}
     */
    getObjectFromDB(object: TIEObject): Promise&lt;DBObject | Array&lt;DBObject&gt;&gt; {
        return this.db.readObjects({id: object.objId}, {owner: &#x27;&quot;&#x27; + this.auth.username.value + &#x27;&quot;&#x27;});
    }

    /**
     * Access method to rest service method setAsFavorites
     *
     * @param objId
     * @returns {Promise&lt;void&gt;}
     */
    setAsFavorites(object: TIEObject): Promise&lt;void&gt; {
        return this.rest.setAsFavorite(object.objId)
            .then( () &#x3D;&gt; {
                this.toastCtrl.create({
                    message: object.attributes.objName + &#x27; als Favorit markiert&#x27;,
                    duration: 3000,
                    position: &#x27;bottom&#x27;,
                }).present();
            });
    }

    /**
     * Access method to rest service method removeFromFavorite
     *
     * @param objId
     * @returns {Promise&lt;void&gt;}
     */
    removeFromFavorite(objId: number): Promise&lt;void&gt; {
        return this.rest.removeFromFavorite(objId);
    }

    /**
     * Access method to rest service method getEntryPoint
     *
     * @returns {Promise&lt;TIEObject&gt;}
     */
    getEntryPoint(): Promise&lt;TIEObject&gt; {
        return this.rest.getEntryPoint();
    }

    storeFingerPrintToken(username: string, token: string) {
        return this.db.storeUserFingerPrint(username, token);
    }

    /**
     * Access method to rest service method requestURLGet and requestURLPut
     *
     * @param link
     * @param put
     * @returns {Promise&lt;TIEObject&gt;}
     */
    getObjectFromServer(link: string, put: boolean &#x3D; false): Promise&lt;TIEObject&gt; {
        return (put) ? this.rest.requestURLPut(link) : this.rest.requestURLGet(link);
    }

    /**
     * Access method to rest service method getObjclassIdFromURI
     *
     * @param uri
     * @param urlGetId
     * @returns {Promise&lt;number&gt;}
     */
    getObjclassIdFromURI(uri: string, urlGetId: string): Promise&lt;number&gt; {
        return this.rest.getObjclassIdFromURI(uri, urlGetId);
    }

    /**
     * Create user in db
     *
     * @param names
     * @returns {Promise&lt;void&gt;}
     */
    createUserInDB(names: Array&lt;string&gt;): Promise&lt;void&gt; {
        return this.db.createUsers(names);
    }

    /**
     * Create objects in db
     *
     * @param objects
     * @param parent
     * @param active
     * @returns {Promise&lt;void&gt;}
     */
    createObjectsInDB(objects: Array&lt;TIEObject&gt;, parent: number, active: number &#x3D; 0) {
        return this.db.createObjects(objects, this.auth.username.value, parent, active);
    }

    /**
     * Converts a json list to an array
     *
     * @param jsonList Of type {[key: string]: any}
     */
    jsonListToArray(jsonList: any): Array&lt;TIEObject&gt; {
        let list: Array&lt;TIEObject&gt; &#x3D; [];
        for (let key in jsonList) {
            if (jsonList.hasOwnProperty(key)) {
                list.push(jsonList[key]);
            }
        }
        return list;
    }

    /**
     * Filter the links of an object and return the viewable/implemented links
     *
     * @param object
     * @returns {Array&lt;TIELink&gt;}
     */
    filterLinks(object: TIEObject): Array&lt;TIELink&gt; {
        let links &#x3D; [];
        for (let i &#x3D; 0; i &lt; object.links.length; i++) {
            let action &#x3D; object.links[i];
            // Filter operations for current available operations
            if (action.rel &#x3D;&#x3D;&#x3D; &#x27;ATTRIBUTES_VIEW&#x27; ||
                action.rel &#x3D;&#x3D;&#x3D; &#x27;BULK_ATTRIBUTES&#x27; ||
                action.rel &#x3D;&#x3D;&#x3D; &#x27;ATTRIBUTES_EDIT&#x27; ||
                action.rel &#x3D;&#x3D;&#x3D; &#x27;VIEW&#x27; ||
                action.rel &#x3D;&#x3D;&#x3D; &#x27;CHECKIN&#x27; ||
                action.rel &#x3D;&#x3D;&#x3D; &#x27;CHECKOUT&#x27; ||
                action.rel &#x3D;&#x3D;&#x3D; &#x27;LIST&#x27; ||
                action.rel &#x3D;&#x3D;&#x3D; &#x27;FIND&#x27; ||
                action.rel &#x3D;&#x3D;&#x3D; &#x27;DRAGDROP&#x27; ||
                action.rel &#x3D;&#x3D;&#x3D; &#x27;DELETE_OFFLINE_COPY&#x27; ||
                action.rel &#x3D;&#x3D;&#x3D; &#x27;CONFIRM&#x27; ||
                action.rel &#x3D;&#x3D;&#x3D; &#x27;CANCEL&#x27;) {
                links.push(action);
            }
        }
        return links;
    }

    /**
     * Compare two strings
     *
     * @param s1
     * @param s2
     * @returns {boolean}
     */
    stringCompare(s1: string, s2: string): boolean {
        return s1.localeCompare(s2) &#x3D;&#x3D;&#x3D; 0;
    }

    applyUserConfig(config?: any) {
        if (config &#x3D;&#x3D;&#x3D; undefined) {
            this.getUserConfig(this.auth.username.value)
                .then(conf &#x3D;&gt; {
                    this.translate.setDefaultLang(conf.find(e &#x3D;&gt; e.I18N &#x3D;&#x3D;&#x3D; &#x27;LANGUAGE&#x27;).VALUE);
                    this.schemeObserver.next(conf.find(e &#x3D;&gt; e.I18N &#x3D;&#x3D;&#x3D; &#x27;COLOR_SCHEME&#x27;).VALUE);
                });
        } else {
            this.translate.setDefaultLang(config.find(e &#x3D;&gt; e.I18N &#x3D;&#x3D;&#x3D; &#x27;LANGUAGE&#x27;).VALUE);
            this.schemeObserver.next(config.find(e &#x3D;&gt; e.I18N &#x3D;&#x3D;&#x3D; &#x27;COLOR_SCHEME&#x27;).VALUE);
        }
    }

    /**
     * Apply custom theme selected by the user
     *
     * @param scheme
     */
    updateColorScheme(scheme: string): void {
        let navbar &#x3D; document.getElementsByTagName(&#x27;ion-navbar&#x27;)[0];
        if (navbar) {
            document.getElementsByTagName(&#x27;body&#x27;)[0].setAttribute(&#x27;scheme&#x27;, scheme);
            let navbarColor &#x3D; window.getComputedStyle(navbar, null).getPropertyValue(&#x27;background-color&#x27;);
            StatusBar.backgroundColorByHexString(this.db.rgbToHex(navbarColor));
        } else {
            console.warn(&#x27;updateColorScheme: DOM not ready, retry&#x27;);
            setTimeout(() &#x3D;&gt; this.updateColorScheme(scheme), 500);
        }

    }

    /**
     * Set new config in DB.
     *
     * @param name
     * @param config
     * @returns {Promise&lt;void&gt;}
     */
    updateUserConfig(name: string, config: any): Promise&lt;void&gt; {
        return this.db.updateUser(name, config)
            .then(() &#x3D;&gt; {
                this.applyUserConfig(config);
                this.toastCtrl.create({
                    message: this.translate.instant(&#x27;TOAST.SAVED_CHANGES&#x27;),
                    duration: 3000,
                    position: &#x27;bottom&#x27;,
                }).present();
            })
            .catch(err &#x3D;&gt; {
                console.error(&#x27;Error in DBService&#x27;, err);
                this.error.handleDBError(err);
            });
    }

    /**
     * Get user by username in db
     *
     * @param username
     * @returns {Promise&lt;string|Array&lt;string&gt;&gt;}
     */
    getUserFromDB(username: string) {
        return this.db.readUsers({name: username});
    }

    /**
     * Get last saved user config from db
     *
     * @param username
     * @returns {Promise&lt;Array&lt;any&gt;&gt;}
     */

    getUserConfig(username: string): any {
        return this.db.getUserConfig(username);
    }

    /**
     * Setup internal sqlite storage with the necessary tables and columns
     *
     * @returns {Promise&lt;void&gt;}
     */
    initDB(): Promise&lt;void&gt; {
        return this.db.initDB();
    }
}
</code></pre>
    </div>
</div>







                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
           </div>
       </div>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script>var COMPODOC_CURRENT_PAGE_DEPTH = 1;</script>

       <script src="../js/search/search.js"></script>
       <script src="../js/search/lunr.min.js"></script>
       <script src="../js/search/search-lunr.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
       <script src="../js/search/search_index.js"></script>

    </body>
</html>
